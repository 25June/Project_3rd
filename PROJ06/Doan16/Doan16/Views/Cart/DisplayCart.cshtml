@using Doan16.Models
@model List<Cart>

@{
    ViewBag.Title = "DisplayCart";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h1 style="text-transform:uppercase; text-align:center;">Thông tin giỏ hàng</h1>
<br />
<table align="center" border="1" width="100%" style="margin-bottom: 3em;">
    <thead>
        <tr style="text-align:center; font-weight:900; background-color:lightblue">
            <td style="padding: 0.5em; width:9.5%;">Mã Sản Phẩm</td>
            <td style="padding: 0.5em; width:18%">Tên Sản Phẩm</td>
            <td style="padding: 0.5em; width:12%">Ảnh Bìa</td>
            <td style="padding: 0.5em; width:10%">Đơn Giá</td>
            <td style="padding: 0.5em; width:9.5%">Số Lượng Tồn</td>
            <td style="padding: 0.5em; width:8%">Số Lượng</td>
            <td style="padding: 0.5em; width:12%">Thành Tiền</td>
            <td style="padding: 0.5em; width:30%"></td>
        </tr>
    </thead>
    <tfoot>
        <tr style="text-align: right; ">
            <td colspan="5" style="padding:0.5em 2em; font-weight:900; color: red;">Số lượng sản phẩm: @ViewBag.TongSoLuong</td>
            <td colspan="2" style="padding:0.5em 2em; font-weight:900; color: red;">Tổng Tiền: @String.Format("{0:0,0}", ViewBag.TongThanhTien) VNĐ</td>
            <td style="padding:0.5em 2em;">
                @using (Html.BeginForm("RemoveAllCart", "Cart", FormMethod.Post))
                {
                    <button class="btn btn-danger">Xóa Giỏ Hàng</button>
                }
            </td>
        </tr>
    </tfoot>
    <tbody>
        @foreach(var item in Model)
        {
        <tr style="text-align:center">
            <td>@item.id_NGK</td>
            <td>@item.name_NGK</td>
            <td>
                <img src="../../images/@item.img_NGK" style="width: 100px;" />
            </td>
            <td>@String.Format("{0:0,0}", @item.price_NGK) VNĐ</td>
            <td>@item.quantity_of_product</td>
            @using (Html.BeginForm("UpdateCart", "Cart", new { @id = item.id_NGK }))
            {
                <td align="center">
                    <input type="number" class="form-control" name="txtQuantity" style="text-align:center; width:65%;" min="1" value="@item.quantity_NGK" />
                </td>
                <td>@String.Format("{0:0,0}", @item.totalPrice_NGK) VNĐ</td>
                <td>
                    <a href="@Url.Action("Details", "SanPham", new { id = item.id_NGK })">
                        <div class="btn btn-primary">Chi Tiết</div>
                    </a>
                    <input class="btn btn-success" type="submit" value="Cập Nhật">
                    <a href="@Url.Action("RemoveCart", "Cart", new { @id = item.id_NGK })">
                        <div class="btn btn-danger">Xóa</div>
                    </a>
                </td>
            }
        </tr>
        }
    </tbody>
</table>

<div class="alert alert-info">
    <strong>Thông báo !</strong> Bạn có tài khoản chưa? Nếu có hãy đăng nhập<a href="@Url.Action("DangNhap", "KhachHang")" class="alert-link"> tại đây</a>.
</div>

@using (Html.BeginForm("Order", "Cart"))
{
    <button type="submit" class="btn btn-primary" style="width: 15%; padding: 0.6em; margin:0 0.5em; float: right">
        Thanh Toán
    </button>
}

@if(Session["TaiKhoan"] != null)
{
    @*@using (Html.BeginForm("Appointment", "Cart"))
    {*@
        <button type="submit" class="btn btn-warning" style="width: 15%; padding: 0.6em; margin:0 0.5em; float: right">
            Hẹn
        </button>
    //}
}
